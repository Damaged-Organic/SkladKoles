!function(e,t){"function"==typeof define&&define.amd?define(["exports"],function(n){e.Brasst=t(e,n)}):e.Brasst=t(e,{})}(this,function(e,t){function n(e){return e?e.replace(/^\/|\/$/,""):void 0}function t(e){e=e||{},this.api=i+"/"+(n(e.locale)||""),this.initialize.apply(this,arguments)}t.version="1.0.0";var i="https://brasst.net.ua/api",s="BrasstCSS";return t.prototype={initialize:function(){this.checkCookie("brasstWidget")||(this.appendCSS(),this.execute())},appendCSS:function(){if(!document.getElementById(s)){var e=document.getElementsByTagName("head")[0],t=document.createElement("link");t.id=s,t.rel="stylesheet",t.type="text/css",t.href="https://brasst.net.ua/bundles/app/Meat/css/widget.css",t.media="all",e.appendChild(t)}},close:function(){this.container.parentNode.removeChild(this.container)},setCookie:function(){var e,t=new Date;t.setTime(t.getTime()+6048e5),e="; expires="+t.toGMTString(),document.cookie="brasstWidget=disabled"+e+"; path=/",this.close()},checkCookie:function(){return document.cookie.length>0&&document.cookie.match(/brasstWidget/)?!0:!1},setup:function(){var e=new XMLHttpRequest;if("withCredentials"in e)e.open("GET",this.api+"?type=html",!0);else{if("undefined"==typeof XDomainRequest)throw new Error("CORS doesn't supported in your browser");e=new XDomainRequest,e.open("GET",this.api+"?type=html")}return e},execute:function(){if(this.api){var e=this,t=this.setup();t&&(t.onload=function(t){if(4===t.target.readyState&&t.target.status>=200&&t.target.status<400){if(!t.target.responseText)throw new Error("There is no delivered data");e.render(t.target.responseText)}}),t.send()}},ensureContainer:function(){this.container=document.createElement("div"),this.container.id="brasstWidget"},render:function(e){e.trim()&&(this.container||this.ensureContainer(),this.container.innerHTML=e,document.body.insertBefore(this.container,document.body.childNodes[0]),this.bindEvents())},bindEvents:function(){if(this.container){var e=this,t=document.getElementById("forgetBrasstWidget");closeButton=document.getElementById("closeBrasstWidget"),closeButton.addEventListener("click",function(){e.close()},!1),t.addEventListener("click",function(){e.setCookie()},!1)}}},t});